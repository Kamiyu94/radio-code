<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>HQ MASTER CODEBOOK</title>
    <style>
        :root {
            --bg-color: #000000;
            --text-main: #ffffff;
            --text-dim: #aaaaaa;
            --panel-bg: #111111;
            --border-color: #333333;
            --highlight: #00ff41;
            
            /* Team Colors */
            --color-alpha: #ff3333;
            --color-bravo: #3388ff;
            --color-charlie: #00ff41;
            --color-delta: #ffff33;
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            user-select: none; 
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-variant-numeric: slashed-zero;
            margin: 0;
            padding: 0;
            height: 100vh; 
            height: 100dvh; 
            width: 100vw;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .hidden { display: none !important; }
        
        button {
            font-family: inherit;
            border: none;
            outline: none;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: bold;
        }

        input { font-family: inherit; user-select: text; }
        
        /* --- SCREEN 1: TEAM SELECT (HOME) --- */
        #screen-team-select {
            height: 100%;
            width: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
            padding-bottom: max(20px, env(safe-area-inset-bottom));
        }

        .home-header {
            flex: 0 0 auto;
            text-align: center;
            margin-bottom: 15px;
            margin-top: 10px;
        }

        .home-header h2 { margin: 0; font-size: 1.8rem; letter-spacing: 2px; text-shadow: 0 0 10px rgba(255,255,255,0.3); }
        .home-header p { margin: 5px 0 0 0; font-size: 0.9rem; opacity: 0.8; }

        .team-grid {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 15px;
            min-height: 0;
            margin-bottom: 15px;
        }

        .team-btn {
            width: 100%; height: 100%; font-size: 1.5rem; border-radius: 12px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: #000; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.2);
        }
        .team-btn:active { transform: scale(0.98); }

        .btn-alpha { background-color: var(--color-alpha); }
        .btn-bravo { background-color: var(--color-bravo); }
        .btn-charlie { background-color: var(--color-charlie); }
        .btn-delta { background-color: var(--color-delta); }

        .gen-link-btn {
            flex: 0 0 50px;
            background: #222;
            border: 1px solid #444;
            color: #888;
            border-radius: 8px;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }
        .gen-link-btn:active { background: #333; color: #fff; }

        /* --- SCREEN 2: MASTER CODEBOOK --- */
        #screen-master {
            height: 100%; width: 100%; display: flex; flex-direction: column; background: #000;
        }

        .master-header {
            flex: 0 0 60px; background: #1a1a1a; border-bottom: 2px solid var(--highlight);
            display: flex; justify-content: space-between; align-items: center; padding: 0 15px; z-index: 10;
        }

        #team-title { font-size: 1.4rem; font-weight: 900; color: var(--highlight); letter-spacing: 1px; }

        .action-btn {
            background: #333; color: #fff; padding: 8px 16px; border-radius: 4px; font-size: 0.9rem; border: 1px solid #555;
        }

        #grid-container {
            flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 20px;
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; align-content: start;
        }

        .grid-item {
            background: #1a1a1a; border: 1px solid #444; border-radius: 8px; aspect-ratio: 1;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .grid-item:active { background: #333; }
        .grid-icon { font-size: 3rem; margin-bottom: 5px; }
        .grid-name { font-size: 0.9rem; color: #fff; font-weight: bold; text-align: center; width: 100%; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; }

        .bottom-nav {
            flex: 0 0 auto; width: 100%;
            height: calc(80px + env(safe-area-inset-bottom)); padding-bottom: env(safe-area-inset-bottom);
            background: #000; border-top: 1px solid #333; display: flex; z-index: 20;
        }
        .nav-btn {
            flex: 1; background: transparent; color: #666; font-size: 2rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .nav-btn.active { color: var(--highlight); background: rgba(255, 255, 255, 0.05); border-top: 3px solid var(--highlight); }
        .nav-label { font-size: 0.8rem; margin-top: 2px; color: #fff; }

        /* --- SCREEN 3: QR GENERATOR --- */
        #screen-generator {
            height: 100%; width: 100%; display: flex; flex-direction: column; background: #000;
        }
        
        .gen-content {
            flex: 1; overflow-y: auto; padding: 20px;
            padding-bottom: calc(50px + env(safe-area-inset-bottom));
        }

        .phase-block { margin-bottom: 30px; border-top: 1px dashed #444; padding-top: 20px; }
        .phase-title { color: #fff; font-size: 1.2rem; font-weight: bold; margin-bottom: 5px; color: var(--highlight); }
        
        .qr-item {
            display: flex; background: #111; border: 1px solid #333; margin-bottom: 15px; padding: 10px; border-radius: 8px; align-items: center;
        }
        .qr-img { width: 100px; height: 100px; background: #fff; margin-right: 15px; border-radius: 4px; }
        .qr-info { flex: 1; overflow: hidden; }
        .qr-desc { color: #fff; font-size: 1rem; font-weight: bold; margin-bottom: 5px; }
        .qr-sub { color: #888; font-size: 0.8rem; margin-bottom: 10px; word-break: break-all; } /* ‰øÆÊ≠£ÔºöÈÅøÂÖçÁ∂≤ÂùÄË¢´Êà™Êñ∑ÁÑ°Ê≥ïÊ™¢Êü• */
        .qr-link { color: var(--highlight); text-decoration: underline; cursor: pointer; }
        
        .copy-btn {
            background: #333; color: #fff; border: 1px solid #555; padding: 5px 10px; font-size: 0.8rem; border-radius: 4px;
        }
        .copy-btn:active { background: var(--highlight); color: #000; }

        /* MODAL */
        #modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center; z-index: 100;
        }
        .modal-content {
            background: #111; border: 2px solid var(--highlight); box-shadow: 0 0 30px var(--highlight);
            padding: 30px; width: 85%; max-width: 350px; border-radius: 16px; text-align: center;
            animation: zoomIn 0.2s ease-out;
        }
        @keyframes zoomIn { from {transform: scale(0.8); opacity: 0;} to {transform: scale(1); opacity: 1;} }
        #modal-icon { font-size: 5rem; display: block; margin-bottom: 10px; }
        #modal-name { font-size: 1.4rem; color: #fff; font-weight: bold; margin-bottom: 20px; display: block; }
        #modal-code {
            background: #000; color: var(--highlight); border: 2px dashed #444; font-size: 2.2rem;
            padding: 15px; border-radius: 8px; letter-spacing: 2px; font-weight: bold;
        }
        .modal-hint {
            margin-top: 20px; color: #fff; font-size: 0.9rem; font-weight: bold;
            border: 1px solid #555; padding: 5px; border-radius: 4px; display: inline-block; background: #222;
        }

    </style>
</head>
<body>

    <div id="screen-team-select">
        <div class="home-header">
            <h2>HQ MASTER LINK</h2>
            <p>SELECT TEAM CODEBOOK</p>
        </div>
        <div class="team-grid">
            <button class="team-btn btn-alpha" onclick="selectTeam('alpha')"><b>ALPHA</b></button>
            <button class="team-btn btn-bravo" onclick="selectTeam('bravo')"><b>BRAVO</b></button>
            <button class="team-btn btn-charlie" onclick="selectTeam('charlie')"><b>CHARLIE</b></button>
            <button class="team-btn btn-delta" onclick="selectTeam('delta')"><b>DELTA</b></button>
        </div>
        <button class="gen-link-btn" onclick="showGenerator()">[ GENERATE MISSION LINKS & QR ]</button>
    </div>

    <div id="screen-master" class="hidden">
        <div class="master-header">
            <span id="team-title">ALPHA TEAM</span>
            <button class="action-btn" onclick="exitToHome()">EXIT</button>
        </div>
        <div id="grid-container"></div>
        <div class="bottom-nav">
            <button class="nav-btn active" onclick="switchCategory('fruits')"><span>üçé</span><span class="nav-label">FRUITS</span></button>
            <button class="nav-btn" onclick="switchCategory('animals')"><span>ü¶Å</span><span class="nav-label">ANIMALS</span></button>
            <button class="nav-btn" onclick="switchCategory('plants')"><span>üå≤</span><span class="nav-label">PLANTS</span></button>
        </div>
    </div>

    <div id="screen-generator" class="hidden">
        <div class="master-header" style="border-color:#666;">
            <span style="color:#fff;">MISSION LINKS</span>
            <button class="action-btn" onclick="exitToHome()">BACK</button>
        </div>
        <div class="gen-content">
            <div style="color:#666; font-size:0.8rem; margin-bottom:20px; text-align:center;">
                BASE URL: https://kamiyu94.github.io/radio-code/mission.html
            </div>
            <div id="qr-list"></div>
            
            <div style="margin-top: 40px; border-top: 1px solid #333; padding-top: 20px; text-align: center;">
                <p style="color: #666; font-size: 0.8rem; margin-bottom: 10px;">DEBUG ZONE (Êú¨Ê©üÊ∏¨Ë©¶Áî®)</p>
                <button class="action-btn" style="border-color: var(--color-alpha); color: var(--color-alpha); width: 100%;" onclick="resetLocalData()">
                    ‚ö† RESET DEVICE DATA
                </button>
            </div>
        </div>
    </div>

    <div id="modal-overlay" class="hidden" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span id="modal-icon">üçé</span>
            <span id="modal-name">ËòãÊûú</span>
            <div id="modal-code">X4T9</div>
            <div class="modal-hint" onclick="closeModal()">TAP TO CLOSE</div>
        </div>
    </div>

    <script>
        // --- DATABASE ---
        // Ë≥áÊñôÂÖßÂÆπÂ∑≤Ê†πÊìö‰πãÂâçÁöÑ‰ª£Á¢ºË°®Á¢∫Ë™ç
        const db = {
            alpha: { // ÈóúÈçµÁ≠îÊ°à: X4T9(Apple), C7M1(Lion), J3R6(Pine)
                fruits: [ {i:"üçá",n:"Ëë°ËêÑ",c:"L2Z5"}, {i:"üçâ",n:"Ë•øÁìú",c:"P8K3"}, {i:"üçä",n:"Ê©òÂ≠ê",c:"S4M1"}, {i:"üçã",n:"Ê™∏Ê™¨",c:"T4W7"}, {i:"üçë",n:"Ê°ÉÂ≠ê",c:"N8R3"}, {i:"üçé",n:"ËòãÊûú",c:"X4T9"}, {i:"üçí",n:"Ê´ªÊ°É",c:"E9I2"}, {i:"üçê",n:"Ê¢®Â≠ê",c:"Q4Y9"}, {i:"ü••",n:"Ê§∞Â≠ê",c:"B1D6"}, {i:"ü•ë",n:"ÈÖ™Ê¢®",c:"H5J0"}, {i:"üç¨",n:"Á≥ñÊûú",c:"F3G8"}, {i:"ü•≠",n:"ËäíÊûú",c:"K7X1"}, {i:"üçà",n:"ÂìàÂØÜÁìú",c:"V2C5"}, {i:"üçÖ",n:"Áï™ËåÑ",c:"O6A4"}, {i:"üçì",n:"ËçâËéì",c:"U9E2"}, {i:"üçç",n:"È≥≥Ê¢®",c:"Z3N7"} ],
                animals: [ {i:"ü¶Ö",n:"ËÄÅÈ∑π",c:"D5S2"}, {i:"üêç",n:"Ëõá",c:"W9F0"}, {i:"ü¶à",n:"ÈØäÈ≠ö",c:"H1J3"}, {i:"ü¶ì",n:"ÊñëÈ¶¨",c:"O3A0"}, {i:"üê≥",n:"ÈØ®È≠ö",c:"V2D6"}, {i:"üêÜ",n:"ÁçµË±π",c:"K8B4"}, {i:"ü¶ò",n:"Ë¢ãÈº†",c:"G6P9"}, {i:"ü¶Å",n:"ÁçÖÂ≠ê",c:"C7M1"}, {i:"üêä",n:"È±∑È≠ö",c:"X2U5"}, {i:"ü¶ç",n:"Â§ßÁå©Áå©",c:"T1I8"}, {i:"ü¶õ",n:"Ê≤≥È¶¨",c:"E4Z7"}, {i:"ü¶í",n:"Èï∑È†∏Èπø",c:"N3Y0"}, {i:"ü¶á",n:"ËùôËù†",c:"Q5L2"}, {i:"ü¶â",n:"Ë≤ìÈ†≠È∑π",c:"R9S6"}, {i:"üê™",n:"Èß±Èßù",c:"M7H3"}, {i:"ü¶ö",n:"Â≠îÈõÄ",c:"A0F1"} ],
                plants: [ {i:"üåª",n:"ÂêëÊó•Ëëµ",c:"G2V4"}, {i:"üåµ",n:"‰ªô‰∫∫Êéå",c:"B8H7"}, {i:"üéã",n:"Á´πÂ≠ê",c:"L6P2"}, {i:"üçÑ",n:"ËòëËèá",c:"S8M2"}, {i:"üå∫",n:"Êâ∂Ê°ëËä±",c:"F5G8"}, {i:"üå≥",n:"Ê©°Ê®π",c:"T1Q9"}, {i:"üçÅ",n:"Ê•ìËëâ",c:"Z7D5"}, {i:"üå≤",n:"ÊùæÊ®π",c:"J3R6"}, {i:"üíê",n:"Ëñ∞Ë°£Ëçâ",c:"K3I6"}, {i:"üåø",n:"ËñÑËç∑",c:"E2A4"}, {i:"üåæ",n:"Â∞èÈ∫•",c:"Y9X1"}, {i:"üå±",n:"ËòÜËë¶",c:"O5N0"}, {i:"üçÇ",n:"ËêΩËëâ",c:"H4W8"}, {i:"üåº",n:"ÈõõËèä",c:"C6U3"}, {i:"üè°",n:"ÊàøÂ±ã",c:"V0S7"}, {i:"üêö",n:"Ë≤ùÊÆº",c:"P8M5"} ]
            },
            bravo: { // ÈóúÈçµÁ≠îÊ°à: A3O7(Banana), Y5N8(Tiger), H5I0(Cactus)
                fruits: [ {i:"üçç",n:"È≥≥Ê¢®",c:"U6Q4"}, {i:"üçê",n:"Ê¢®Â≠ê",c:"B2H9"}, {i:"üçå",n:"È¶ôËïâ",c:"A3O7"}, {i:"üçé",n:"ËòãÊûú",c:"C5K1"}, {i:"üçâ",n:"Ë•øÁìú",c:"D8M3"}, {i:"üç¨",n:"Á≥ñÊûú",c:"E0N6"}, {i:"ü•ù",n:"Â•áÁï∞Êûú",c:"F4P2"}, {i:"üçì",n:"ËçâËéì",c:"G7Q5"}, {i:"ü••",n:"Ê§∞Â≠ê",c:"I1R8"}, {i:"ü•≠",n:"ËäíÊûú",c:"J9S0"}, {i:"üçá",n:"Ëë°ËêÑ",c:"L3T6"}, {i:"üçí",n:"Ê´ªÊ°É",c:"V2X7"}, {i:"üçã",n:"Ê™∏Ê™¨",c:"W5Y3"}, {i:"üçä",n:"Ê©òÂ≠ê",c:"Z8A4"}, {i:"üçÖ",n:"Áï™ËåÑ",c:"B6C9"}, {i:"üçà",n:"ÂìàÂØÜÁìú",c:"D1E5"} ],
                animals: [ {i:"üêò",n:"Â§ßË±°",c:"S2K9"}, {i:"üêÜ",n:"ÁçµË±π",c:"F7G1"}, {i:"üê∫",n:"Áãº",c:"H3I6"}, {i:"üêª",n:"ÁÜä",c:"J0L4"}, {i:"ü¶ä",n:"ÁãêÁã∏",c:"M8O2"}, {i:"ü¶Å",n:"ÁçÖÂ≠ê",c:"P5Q9"}, {i:"üêØ",n:"ËÄÅËôé",c:"Y5N8"}, {i:"ü¶ì",n:"ÊñëÈ¶¨",c:"R1T7"}, {i:"ü¶ò",n:"Ë¢ãÈº†",c:"U4V0"}, {i:"ü¶í",n:"Èï∑È†∏Èπø",c:"W6X3"}, {i:"ü¶à",n:"ÈØäÈ≠ö",c:"Z9A5"}, {i:"ü¶Ö",n:"ËÄÅÈ∑π",c:"B2C8"}, {i:"ü¶â",n:"Ë≤ìÈ†≠È∑π",c:"D7E1"}, {i:"üêç",n:"Ëõá",c:"F3G6"}, {i:"üêä",n:"È±∑È≠ö",c:"H9I2"}, {i:"üêº",n:"ÁÜäË≤ì",c:"K4L0"} ],
                plants: [ {i:"üåπ",n:"Áé´Áë∞",c:"M4X0"}, {i:"üçÅ",n:"Ê•ìËëâ",c:"Z7D5"}, {i:"üå¥",n:"Ê§∞Â≠êÊ®π",c:"A2B6"}, {i:"üçÄ",n:"Âπ∏ÈÅãËçâ",c:"C9E1"}, {i:"üåª",n:"ÂêëÊó•Ëëµ",c:"F3G8"}, {i:"üå∑",n:"È¨±ÈáëÈ¶ô",c:"J1K7"}, {i:"üåµ",n:"‰ªô‰∫∫Êéå",c:"H5I0"}, {i:"üå∫",n:"Êâ∂Ê°ëËä±",c:"L6N3"}, {i:"üå≤",n:"ÊùæÊ®π",c:"O8P2"}, {i:"üåæ",n:"Á®ªÁ©ó",c:"Q4R9"}, {i:"üçÑ",n:"ËòëËèá",c:"S0T5"}, {i:"üéã",n:"Á´πÂ≠ê",c:"U7V1"}, {i:"üåº",n:"ÈõõËèä",c:"W2Y6"}, {i:"üíê",n:"Ëñ∞Ë°£Ëçâ",c:"Z5A3"}, {i:"üåø",n:"ËñÑËç∑",c:"B9C4"}, {i:"üêö",n:"Ë≤ùÊÆº",c:"D1E8"} ]
            },
            charlie: { // ÈóúÈçµÁ≠îÊ°à: V1G5(Strawberry), F6B2(Wolf), C5Y9(Palm)
                fruits: [ {i:"üçë",n:"Ê°ÉÂ≠ê",c:"N8R3"}, {i:"üçê",n:"Ê¢®Â≠ê",c:"A4B7"}, {i:"üçì",n:"ËçâËéì",c:"V1G5"}, {i:"üçã",n:"Ê™∏Ê™¨",c:"C9D1"}, {i:"ü••",n:"Ê§∞Â≠ê",c:"E2F6"}, {i:"üçá",n:"Ëë°ËêÑ",c:"G5H0"}, {i:"üçà",n:"ÂìàÂØÜÁìú",c:"I8J3"}, {i:"üçâ",n:"Ë•øÁìú",c:"K1L9"}, {i:"üçä",n:"Ê©òÂ≠ê",c:"M6N4"}, {i:"üçç",n:"È≥≥Ê¢®",c:"O3P7"}, {i:"üçé",n:"ËòãÊûú",c:"Q0R2"}, {i:"üçå",n:"È¶ôËïâ",c:"S5T8"}, {i:"ü•≠",n:"ËäíÊûú",c:"U7V9"}, {i:"üçÖ",n:"Áï™ËåÑ",c:"W2X5"}, {i:"üç¨",n:"Á≥ñÊûú",c:"Y6Z1"}, {i:"ü•ë",n:"ÈÖ™Ê¢®",c:"A9B4"} ],
                animals: [ {i:"üêº",n:"ÁÜäË≤ì",c:"I9E4"}, {i:"ü¶Å",n:"ÁçÖÂ≠ê",c:"C2D8"}, {i:"üêÖ",n:"ËÄÅËôé",c:"G7H1"}, {i:"ü¶ì",n:"ÊñëÈ¶¨",c:"J3K5"}, {i:"üê∫",n:"Áãº",c:"F6B2"}, {i:"ü¶Ö",n:"ËÄÅÈ∑π",c:"L0M9"}, {i:"üêä",n:"È±∑È≠ö",c:"N4O6"}, {i:"ü¶à",n:"ÈØäÈ≠ö",c:"P8Q2"}, {i:"üêò",n:"Â§ßË±°",c:"R1S7"}, {i:"ü¶â",n:"Ë≤ìÈ†≠È∑π",c:"T5U0"}, {i:"ü¶í",n:"Èï∑È†∏Èπø",c:"V9W3"}, {i:"ü¶õ",n:"Ê≤≥È¶¨",c:"X6Y1"}, {i:"ü¶ç",n:"Â§ßÁå©Áå©",c:"Z2A8"}, {i:"ü¶ä",n:"ÁãêÁã∏",c:"B7C3"}, {i:"ü¶ò",n:"Ë¢ãÈº†",c:"D0E5"}, {i:"üêª",n:"ÁÜä",c:"F4G9"} ],
                plants: [ {i:"üå∑",n:"È¨±ÈáëÈ¶ô",c:"Q7U1"}, {i:"üçÑ",n:"ËòëËèá",c:"S8M2"}, {i:"üéã",n:"Á´πÂ≠ê",c:"A3B6"}, {i:"üå¥",n:"Ê§∞Â≠êÊ®π",c:"C5Y9"}, {i:"üçÅ",n:"Ê•ìËëâ",c:"D0E4"}, {i:"üå≤",n:"ÊùæÊ®π",c:"F9G2"}, {i:"üå∫",n:"Êâ∂Ê°ëËä±",c:"H1I5"}, {i:"üåµ",n:"‰ªô‰∫∫Êéå",c:"J6K8"}, {i:"üåª",n:"ÂêëÊó•Ëëµ",c:"L2M7"}, {i:"üåπ",n:"Áé´Áë∞",c:"N4O0"}, {i:"üçÄ",n:"Âπ∏ÈÅãËçâ",c:"P8R3"}, {i:"üåæ",n:"Á®ªÁ©ó",c:"S5T9"}, {i:"üíê",n:"Ëñ∞Ë°£Ëçâ",c:"V1W6"}, {i:"üåº",n:"ÈõõËèä",c:"X7Z2"}, {i:"üåø",n:"ËñÑËç∑",c:"A9B3"}, {i:"üêö",n:"Ë≤ùÊÆº",c:"C0D5"} ]
            },
            delta: { // ÈóúÈçµÁ≠îÊ°à: J6H2(Kiwi), R3Z5(Bear), N9T4(Clover)
                fruits: [ {i:"üçê",n:"Ê¢®Â≠ê",c:"Q4Y9"}, {i:"ü•≠",n:"ËäíÊûú",c:"K7X1"}, {i:"üçå",n:"È¶ôËïâ",c:"A2B5"}, {i:"ü•ù",n:"Â•áÁï∞Êûú",c:"J6H2"}, {i:"üçé",n:"ËòãÊûú",c:"C8D0"}, {i:"üçí",n:"Ê´ªÊ°É",c:"E3F9"}, {i:"üçá",n:"Ëë°ËêÑ",c:"G6I4"}, {i:"üçâ",n:"Ë•øÁìú",c:"L1M7"}, {i:"üçì",n:"ËçâËéì",c:"N5O2"}, {i:"üçã",n:"Ê™∏Ê™¨",c:"P9R3"}, {i:"üçç",n:"È≥≥Ê¢®",c:"S4T8"}, {i:"üçà",n:"ÂìàÂØÜÁìú",c:"U0V6"}, {i:"üçä",n:"Ê©òÂ≠ê",c:"W7Z1"}, {i:"ü•ë",n:"ÈÖ™Ê¢®",c:"A5B9"}, {i:"ü••",n:"Ê§∞Â≠ê",c:"C2D6"}, {i:"üçÖ",n:"Áï™ËåÑ",c:"E8F3"} ],
                animals: [ {i:"ü¶ä",n:"ÁãêÁã∏",c:"L8P0"}, {i:"üê≥",n:"ÈØ®È≠ö",c:"V2D6"}, {i:"üêÖ",n:"ËÄÅËôé",c:"A7B1"}, {i:"ü¶Å",n:"ÁçÖÂ≠ê",c:"C9E4"}, {i:"üê∫",n:"Áãº",c:"F5G8"}, {i:"üêª",n:"ÁÜä",c:"R3Z5"}, {i:"üêò",n:"Â§ßË±°",c:"H2I6"}, {i:"ü¶ç",n:"Â§ßÁå©Áå©",c:"J0K3"}, {i:"üêä",n:"È±∑È≠ö",c:"M4N9"}, {i:"üêÜ",n:"ÁçµË±π",c:"O6Q2"}, {i:"ü¶í",n:"Èï∑È†∏Èπø",c:"S1T7"}, {i:"ü¶Ö",n:"ËÄÅÈ∑π",c:"U8V3"}, {i:"ü¶â",n:"Ë≤ìÈ†≠È∑π",c:"W5X0"}, {i:"ü¶á",n:"ËùôËù†",c:"Y9Z4"}, {i:"ü¶õ",n:"Ê≤≥È¶¨",c:"A3B8"}, {i:"ü¶ò",n:"Ë¢ãÈº†",c:"C6D2"} ],
                plants: [ {i:"üçÄ",n:"Âπ∏ÈÅãËçâ",c:"N9T4"}, {i:"üåæ",n:"Á®ªÁ©ó",c:"W1E3"}, {i:"üå∫",n:"Êâ∂Ê°ëËä±",c:"F5G8"}, {i:"üåπ",n:"Áé´Áë∞",c:"H2I7"}, {i:"üå∑",n:"È¨±ÈáëÈ¶ô",c:"J6K0"}, {i:"üå≤",n:"ÊùæÊ®π",c:"L4M9"}, {i:"üåª",n:"ÂêëÊó•Ëëµ",c:"O3P5"}, {i:"üåµ",n:"‰ªô‰∫∫Êéå",c:"Q8R1"}, {i:"üéã",n:"Á´πÂ≠ê",c:"S2T6"}, {i:"üçÅ",n:"Ê•ìËëâ",c:"U7V4"}, {i:"üå¥",n:"Ê§∞Â≠êÊ®π",c:"X0Y5"}, {i:"üíê",n:"Ëñ∞Ë°£Ëçâ",c:"Z9A3"}, {i:"üåº",n:"ÈõõËèä",c:"B8C2"}, {i:"üåø",n:"ËñÑËç∑",c:"D1E6"}, {i:"üêö",n:"Ë≤ùÊÆº",c:"F5G0"}, {i:"üè°",n:"ÊàøÂ±ã",c:"H4I9"} ]
            }
        };

        // --- APP STATE ---
        let currentTeam = null;
        let currentCat = 'fruits';

        // --- ELEMENTS ---
        const screenSelect = document.getElementById('screen-team-select');
        const screenMaster = document.getElementById('screen-master');
        const screenGen = document.getElementById('screen-generator');
        const gridContainer = document.getElementById('grid-container');
        const teamTitle = document.getElementById('team-title');
        const modal = document.getElementById('modal-overlay');
        const navBtns = document.querySelectorAll('.nav-btn');

        // --- CORE FUNCTIONS ---

        function selectTeam(team) {
            currentTeam = team;
            teamTitle.innerText = team.toUpperCase() + " TEAM";
            
            let color = '#00ff41';
            if(team === 'alpha') color = '#ff3333';
            if(team === 'bravo') color = '#3388ff';
            if(team === 'charlie') color = '#00ff41';
            if(team === 'delta') color = '#ffff33';
            
            document.documentElement.style.setProperty('--highlight', color);
            
            screenSelect.classList.add('hidden');
            screenMaster.classList.remove('hidden');
            
            switchCategory('fruits');
        }

        function exitToHome() {
            screenMaster.classList.add('hidden');
            screenGen.classList.add('hidden');
            screenSelect.classList.remove('hidden');
            currentTeam = null;
        }

        function switchCategory(cat) {
            currentCat = cat;
            navBtns.forEach(btn => {
                if(btn.innerText.toLowerCase().includes(cat)) btn.classList.add('active');
                else btn.classList.remove('active');
            });
            renderGrid();
        }

        function renderGrid() {
            gridContainer.innerHTML = '';
            const items = db[currentTeam][currentCat];
            items.forEach(item => {
                const div = document.createElement('div');
                div.className = 'grid-item';
                div.onclick = () => showModal(item);
                div.innerHTML = `<div class="grid-icon">${item.i}</div><div class="grid-name">${item.n}</div>`;
                gridContainer.appendChild(div);
            });
        }

        function showModal(item) {
            document.getElementById('modal-icon').innerText = item.i;
            document.getElementById('modal-name').innerText = item.n;
            document.getElementById('modal-code').innerText = item.c;
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        // --- GENERATOR FUNCTIONS ---

        const missionPoints = [
            { title: "PHASE 1: FRUITS (Rescue: 7xxx)", points: [
                { id: 'loc_1', desc: '1. AÁµÑÂú∞Èªû (ÁúãÈ¶ôËïâ/BravoÁµ¶)', icon: 'üçå' },
                { id: 'loc_2', desc: '2. BÁµÑÂú∞Èªû (ÁúãËòãÊûú/AlphaÁµ¶)', icon: 'üçé' },
                { id: 'loc_3', desc: '3. CÁµÑÂú∞Èªû (ÁúãÂ•áÁï∞Êûú/DeltaÁµ¶)', icon: 'ü•ù' },
                { id: 'loc_4', desc: '4. DÁµÑÂú∞Èªû (ÁúãËçâËéì/CharlieÁµ¶)', icon: 'üçì' }
            ]},
            { title: "PHASE 2: ANIMALS (Rescue: 8xxx)", points: [
                { id: 'loc_5', desc: '5. AÁµÑÂú∞Èªû (ÁúãÁãº/CharlieÁµ¶)', icon: 'üê∫' },
                { id: 'loc_6', desc: '6. CÁµÑÂú∞Èªû (ÁúãÁçÖÂ≠ê/AlphaÁµ¶)', icon: 'ü¶Å' },
                { id: 'loc_7', desc: '7. BÁµÑÂú∞Èªû (ÁúãÁÜä/DeltaÁµ¶)', icon: 'üêª' },
                { id: 'loc_8', desc: '8. DÁµÑÂú∞Èªû (ÁúãËÄÅËôé/BravoÁµ¶)', icon: 'üêØ' }
            ]},
            { title: "PHASE 3: PLANTS (Rescue: 9xxx)", points: [
                { id: 'loc_9',  desc: 'Loc 9: AÁµÑ (ÁúãÂπ∏ÈÅãËçâ/DeltaÁµ¶)', icon: 'üçÄ' },
                { id: 'loc_10', desc: 'Loc 10: BÁµÑ (ÁúãÊ§∞Â≠êÊ®π/CharlieÁµ¶)', icon: 'üå¥' },
                { id: 'loc_11', desc: 'Loc 11: CÁµÑ (Áúã‰ªô‰∫∫Êéå/BravoÁµ¶)', icon: 'üåµ' },
                { id: 'loc_12', desc: 'Loc 12: DÁµÑ (ÁúãÊùæÊ®π/AlphaÁµ¶)', icon: 'üå≤' }
            ]}
        ];

        function showGenerator() {
            screenSelect.classList.add('hidden');
            screenGen.classList.remove('hidden');
            updateQRCodes();
        }

        function updateQRCodes() {
            // Ëá™ÂãïÈéñÂÆöÁ∂≤ÂùÄ
            const baseUrl = "https://kamiyu94.github.io/radio-code/mission.html";
            const listContainer = document.getElementById('qr-list');
            
            listContainer.innerHTML = '';

            missionPoints.forEach(phase => {
                const phaseDiv = document.createElement('div');
                phaseDiv.className = 'phase-block';
                phaseDiv.innerHTML = `<div class="phase-title">${phase.title}</div>`;
                
                phase.points.forEach(p => {
                    const fullUrl = `${baseUrl}?id=${p.id}`;
                    // Using QR Server API (Requires Internet)
                    const qrSrc = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(fullUrl)}`;
                    
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'qr-item';
                    itemDiv.innerHTML = `
                        <img src="${qrSrc}" class="qr-img" alt="QR (Need Net)">
                        <div class="qr-info">
                            <div class="qr-desc">${p.icon} ${p.desc}</div>
                            <div class="qr-sub">
                                <a href="${fullUrl}" target="_blank" class="qr-link">${fullUrl}</a>
                            </div>
                            <button class="copy-btn" onclick="copyToClipboard('${fullUrl}')">COPY LINK</button>
                        </div>
                    `;
                    phaseDiv.appendChild(itemDiv);
                });
                
                listContainer.appendChild(phaseDiv);
            });
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert('LINK COPIED!');
            }).catch(err => {
                console.error('Copy failed', err);
            });
        }

        // --- REBOOT LOCAL DATA ---
        function resetLocalData() {
            if(confirm('Ê≥®ÊÑèÔºöÈÄôÂè™ÊúÉÊ∏ÖÈô§„ÄåÈÄôÂè∞ÊâãÊ©ü„Äç‰∏äÁöÑ‰ªªÂãôÈÄ≤Â∫¶„ÄÇ\n(Â≠∏Âì°ÁöÑÊâãÊ©üÂøÖÈ†àÂú®‰ªñÂÄëÈÇ£ÈÇäËº∏ÂÖ• 8964 ÈáçÁΩÆ)\n\nÁ¢∫ÂÆöË¶ÅÊ∏ÖÈô§ÂóéÔºü')) {
                localStorage.clear();
                alert('DEVICE DATA CLEARED!');
                location.reload();
            }
        }

    </script>
</body>
</html>
